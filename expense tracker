import java.util.*;

/**
 * Represents a financial transaction (income or expense).
 */
class Transaction {
    String type, category;
    double amount;
    Date date;

    public Transaction(String type, String category, double amount) {
        this.type = type;
        this.category = category;
        this.amount = amount;
        this.date = new Date(); // Auto-assign current date
    }
}

/**
 * Expense Tracker System to manage personal finances.
 */
class ExpenseTracker {
    private final List<Transaction> transactions = new ArrayList<>();
    private final Set<String> validCategories = new HashSet<>(Arrays.asList(
            "Food", "Rent", "Transport", "Shopping", "Entertainment", "Bills", "Salary", "Freelance", "Other"
    ));
    private double totalIncome = 0;
    private double totalExpenses = 0;

    /**
     * Adds an income or expense transaction.
     */
    public void addTransaction(String type, String category, double amount) {
        if (!validCategories.contains(category)) {
            System.out.println("âŒ Invalid category! Choose from: " + validCategories);
            return;
        }
        transactions.add(new Transaction(type, category, amount));
        if (type.equalsIgnoreCase("income")) {
            totalIncome += amount;
        } else {
            totalExpenses += amount;
        }
        System.out.println("âœ… Transaction added successfully!");
    }

    /**
     * Displays all transactions with details.
     */
    public void viewTransactions() {
        if (transactions.isEmpty()) {
            System.out.println("ğŸ“Œ No transactions recorded yet.");
            return;
        }
        System.out.println("\nğŸ“œ Transaction History:");
        for (Transaction t : transactions) {
            System.out.printf("[%s] %s - â‚¹%.2f (Category: %s, Date: %s)\n",
                    t.type.toUpperCase(), t.type.equalsIgnoreCase("income") ? "+" : "-",
                    t.amount, t.category, t.date.toString());
        }
    }

    /**
     * Generates and displays a financial summary.
     */
    public void generateReport() {
        double netBalance = totalIncome - totalExpenses;
        System.out.println("\nğŸ’° Financial Summary:");
        System.out.printf("ğŸ”¹ Total Income: â‚¹%.2f\n", totalIncome);
        System.out.printf("ğŸ”¹ Total Expenses: â‚¹%.2f\n", totalExpenses);
        System.out.printf("ğŸ”¹ Net Balance: â‚¹%.2f (%s)\n", netBalance, (netBalance >= 0 ? "Surplus âœ…" : "Deficit âŒ"));
    }
}

/**
 * Main class to run the Personal Expense Tracker.
 */
public class PersonalExpenseTracker {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        ExpenseTracker tracker = new ExpenseTracker();

        System.out.println("\nğŸ‘‹ Welcome to **Personal Expense Tracker**!");
        System.out.println("ğŸ“Š Manage your finances smartly and efficiently.");

        while (true) {
            System.out.println("\nğŸ“Œ Choose an option:");
            System.out.println("1ï¸âƒ£ Add Income");
            System.out.println("2ï¸âƒ£ Add Expense");
            System.out.println("3ï¸âƒ£ View Transactions");
            System.out.println("4ï¸âƒ£ Generate Financial Report");
            System.out.println("5ï¸âƒ£ Exit");

            System.out.print("ğŸ‘‰ Enter your choice: ");
            int choice = scanner.nextInt();
            scanner.nextLine(); // Consume newline

            switch (choice) {
                case 1:
                    System.out.print("ğŸ’° Enter income amount: â‚¹");
                    double income = scanner.nextDouble();
                    scanner.nextLine(); // Consume newline
                    tracker.addTransaction("income", "Salary", income);
                    break;

                case 2:
                    System.out.print("ğŸ’¸ Enter expense amount: â‚¹");
                    double expense = scanner.nextDouble();
                    scanner.nextLine(); // Consume newline
                    System.out.print("ğŸ“‚ Enter category (Food, Rent, Transport, Shopping, etc.): ");
                    String category = scanner.nextLine();
                    tracker.addTransaction("expense", category, expense);
                    break;

                case 3:
                    tracker.viewTransactions();
                    break;

                case 4:
                    tracker.generateReport();
                    break;

                case 5:
                    System.out.println("ğŸ‘‹ Thank you for using the Expense Tracker. Stay financially smart! ğŸš€");
                    scanner.close();
                    return;

                default:
                    System.out.println("âŒ Invalid choice! Please enter a valid option.");
            }
        }
    }
}
